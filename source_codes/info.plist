<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string></string>
	<key>connections</key>
	<dict>
		<key>BD4EF4CC-DB4B-4397-937E-44BDB9ACEF09</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>E5D2D2A9-9FB1-41A9-A11B-D89F90E595A0</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>E5D2D2A9-9FB1-41A9-A11B-D89F90E595A0</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>4D90AA80-A25C-4B65-A0E4-5103FFF20ED5</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Yu-Yang Qian</string>
	<key>description</key>
	<string>Quick access to predefined prompts for efficient text input</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>QuickPrompt</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>1</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<false/>
				<key>argumenttrimmode</key>
				<integer>1</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>keyword</key>
				<string>Script Filter</string>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>2</integer>
				<key>runningsubtext</key>
				<string>Searching...</string>
				<key>script</key>
				<string>#!/usr/bin/python3
# -*- coding: utf-8 -*-

import json
import sys
import os
from pathlib import Path

# å®šä¹‰ç¼“å­˜æ–‡ä»¶è·¯å¾„
CACHE_FILE = os.path.expanduser('~/.cache/QuickPrompt.json')

def load_cache():
    """ä»ç¼“å­˜æ–‡ä»¶åŠ è½½ä¸Šæ¬¡çš„æœç´¢ç»“æœ"""
    try:
        # ç¡®ä¿ç¼“å­˜ç›®å½•å­˜åœ¨
        cache_dir = os.path.dirname(CACHE_FILE)
        if not os.path.exists(cache_dir):
            os.makedirs(cache_dir)
            
        if os.path.exists(CACHE_FILE):
            with open(CACHE_FILE, 'r', encoding='utf-8') as f:
                return json.load(f)
    except Exception:
        pass
    return None

def save_cache(items):
    """ä¿å­˜æœç´¢ç»“æœåˆ°ç¼“å­˜æ–‡ä»¶"""
    try:
        with open(CACHE_FILE, 'w', encoding='utf-8') as f:
            json.dump(items, f, ensure_ascii=False, indent=2)
    except Exception:
        pass

def get_items():
    """Return the list of all prompt items with separate search keys"""
    return [
        {
            "title": "ğŸ” â‡¨ğŸ”  polish",
            "subtitle": "è‹±æ–‡å­¦æœ¯å†™ä½œæ¶¦è‰²",
            "arg": "Below is a paragraph from an academic paper. Polish the writing to meet the academic style, improve the spelling, grammar, clarity, concision and overall readability. Only replace the word and rewrite the whole sentence when necessary. The writing should follow academic style and do not use words that are too fancy:\n\n",
            "search_keys": ["polish"],
            "icon": {
                "type": "fileicon",
                "path": "/System/Applications/TextEdit.app"
            }
        },

        {
            "title": "ğŸ“šåŠ å…¥Bibtex",
            "subtitle": "åŠ å…¥bibtexå¼•ç”¨",
            "arg": "æŒ‰ç…§ä¸Šæ–‡å·²æœ‰çš„bibtexçš„æ ¼å¼ï¼ŒåŠ å…¥ä¸‹é¢çš„citationã€‚æ³¨æ„å’Œä¸Šæ–‡å·²æœ‰çš„bibtexä¿æŒä¸€æ ·çš„ç¼©å†™ã€æ ¼å¼ç­‰ã€‚å°¤å…¶æ³¨æ„å¯¹arxivæ–‡ç« çš„å¼•ç”¨ï¼ˆåº”ç±»ä¼¼äº@article{arxiv'22:adatask,\n  title   = {AdaTask: Adaptive Multitask Online Learning},\n  author  = {Laforgue, Pierre and Della Vecchia, Andrea and Cesa-Bianchi, Nicol{\`o} and Rosasco, Lorenzo},\n  journal = {ArXiv preprint},\n  volume  = {arXiv:2205.15802},\n  year    = {2021}\n}ï¼‰ï¼š\n\n",
            "search_keys": ["bibtex"],
            "icon": {
                "type": "fileicon",
                "path": "/System/Applications/Notes.app"
            }
        },
        {
            "title": "ğŸ” â‡¨ğŸ€„ï¸ è‹±è¯‘ä¸­",
            "subtitle": "å­¦æœ¯ç¿»è¯‘ è‹±è¯‘ä¸­",
            "arg": "ä½ æ˜¯ä¸€ä½ç§‘ç ”è®ºæ–‡å®¡ç¨¿å‘˜ï¼Œæ“…é•¿å†™ä½œé«˜è´¨é‡çš„ç§‘ç ”è®ºæ–‡ï¼Œå°¤å…¶æ˜¯æœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½é¢†åŸŸçš„è®ºæ–‡ã€‚\nè¯·ä½ å¸®æˆ‘å‡†ç¡®ä¸”å­¦æœ¯æ€§åœ°å°†ä»¥ä¸‹æºæ–‡æœ¬ç¿»è¯‘æˆæµç•…ã€æ˜“äºé˜…è¯»çš„ä¸­æ–‡ï¼Œä¸”å°†æ•°å­¦å…¬å¼ç¿»è¯‘ä¸º$ç¬¦å·åŒ…è£¹çš„LaTeXä»£ç ã€‚åœ¨ç¿»è¯‘ä¸“æœ‰æœ¯è¯­æ—¶ï¼Œè¯·æ€»æ˜¯ä½¿ç”¨æ‹¬å·é¢å¤–æ ‡æ³¨å‡ºè¯¥æœ¯è¯­çš„åŸæ–‡ã€‚è¯·ç›´æ¥è¾“å‡ºç¿»è¯‘åçš„æ–‡æœ¬ã€‚\n\næºæ–‡æœ¬:",
            "search_keys": ["yingyizhong"],
            "icon": {
                "type": "fileicon",
                "path": "/System/Applications/Font Book.app"
            }
        },
        {
            "title": "ğŸ€„ï¸â‡¨ğŸ”  ä¸­è¯‘è‹±",
            "subtitle": "å­¦æœ¯ç¿»è¯‘ ä¸­è¯‘è‹±",
            "arg": "Please translate following sentence to English with academic writing, improve the spelling, grammar, clarity, concision and overall readability. When necessary, rewrite the whole sentence.\n\n",
            "search_keys": ["zhongyiying"],
            "icon": {
                "type": "fileicon",
                "path": "/System/Applications/Font Book.app"
            }
        },
        {
            "title": "ğŸ€„ï¸â‡¨ğŸ€„ï¸ ä¸­æ–‡ polish",
            "subtitle": "å­¦æœ¯å†™ä½œæ¶¦è‰²ï¼ˆè¯¦ç»†ä¿®æ”¹è¯´æ˜ï¼‰",
            "arg": "ä½œä¸ºä¸€åä¸­æ–‡å­¦æœ¯è®ºæ–‡å†™ä½œæ”¹è¿›åŠ©ç†ï¼Œä½ çš„ä»»åŠ¡æ˜¯æ”¹è¿›æ‰€æä¾›æ–‡æœ¬çš„æ‹¼å†™ã€è¯­æ³•ã€æ¸…æ™°ã€ç®€æ´å’Œæ•´ä½“å¯è¯»æ€§ï¼ŒåŒæ—¶åˆ†è§£é•¿å¥ï¼Œå‡å°‘é‡å¤ï¼Œå¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚è¯·åªæä¾›æ–‡æœ¬çš„æ›´æ­£ç‰ˆæœ¬ï¼Œé¿å…åŒ…æ‹¬è§£é‡Šã€‚è¯·ç¼–è¾‘ä»¥ä¸‹æ–‡æœ¬ï¼š\n\n",
            "search_keys": ["polishzhong"],
            "icon": {
                "type": "fileicon",
                "path": "/System/Applications/TextEdit.app"
            }
        },
        {
            "title": "âœğŸ» è§£é‡Šæ¯æ­¥ä»£ç çš„ä½œç”¨",
            "subtitle": "è§£é‡Šä»£ç ",
            "arg": "I would like you to serve as a code interpreter with Chinese, and elucidate the syntax and the semantics of the code line-by-line:\n\n",
            "search_keys": ["jieshi", "code", "python"]
        }
    ]

def calculate_relevance(item, query):
    """è®¡ç®—é¡¹ç›®ä¸æœç´¢è¯çš„ç›¸å…³åº¦åˆ†æ•°"""
    score = 0
    
    # æ£€æŸ¥æœç´¢å…³é”®è¯
    for key in item['search_keys']:
        if query in key.lower():
            # å¦‚æœæœç´¢è¯åœ¨å¼€å¤´ï¼Œç»™äºˆæ›´é«˜åˆ†æ•°
            if key.lower().startswith(query):
                score += 3
            else:
                score += 1
                
    # æ£€æŸ¥æ ‡é¢˜å’Œå‰¯æ ‡é¢˜
    if query in item['title'].lower():
        if item['title'].lower().startswith(query):
            score += 2
        else:
            score += 1
            
    if query in item['subtitle'].lower():
        if item['subtitle'].lower().startswith(query):
            score += 2
        else:
            score += 1
            
    return score

def search_items(query):
    """Filter items based on search query"""
    items = get_items()
    
    # å¦‚æœæŸ¥è¯¢ä¸ºç©ºï¼Œå°è¯•ä»ç¼“å­˜åŠ è½½ä¸Šæ¬¡ç»“æœå¹¶å°†å…¶æ”¾åœ¨æœ€å‰é¢
    if not query or query == '':
        cached_results = load_cache()
        if cached_results:
            # åˆ›å»ºä¸€ä¸ªé›†åˆå­˜å‚¨ç¼“å­˜ç»“æœä¸­çš„æ ‡é¢˜ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾
            cached_titles = {item['title'] for item in cached_results}
            # è·å–ä¸åœ¨ç¼“å­˜ä¸­çš„å…¶ä»–é¡¹ç›®
            other_items = [item for item in items if item['title'] not in cached_titles]
            # è¿”å›ç¼“å­˜ç»“æœå’Œå…¶ä»–é¡¹ç›®çš„ç»„åˆ
            return cached_results + other_items
        return items
    
    # Convert query to lowercase for case-insensitive search
    query = query.lower().strip()
    
    # Filter and score items
    scored_items = []
    for item in items:
        score = calculate_relevance(item, query)
        if score &gt; 0:
            scored_items.append((score, item))
    
    # Sort by score in descending order
    scored_items.sort(key=lambda x: x[0], reverse=True)
    
    # è·å–æ’åºåçš„ç»“æœ
    filtered_items = [item for score, item in scored_items]
    
    # å¦‚æœæŸ¥è¯¢ä¸ä¸ºç©ºï¼Œä¿å­˜ç»“æœåˆ°ç¼“å­˜
    if query:
        save_cache(filtered_items)
    
    return filtered_items

def main():
    try:
        # Get query from Alfred
        query = sys.argv[1] if len(sys.argv) &gt; 1 else ""
        
        # Get filtered items
        items = search_items(query)
        
        # Prepare output for Alfred
        output = {"items": items}
        
        # Print JSON output
        print(json.dumps(output, ensure_ascii=False))
    except Exception as e:
        # Error handling
        error_output = {
            "items": [{
                "title": "Error occurred",
                "subtitle": str(e),
                "arg": ""
            }]
        }
        print(json.dumps(error_output, ensure_ascii=False))

if __name__ == "__main__":
    main()</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string></string>
				<key>title</key>
				<string>æˆ‘æƒ³è¾“å…¥çš„promptæ˜¯...</string>
				<key>type</key>
				<integer>9</integer>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>E5D2D2A9-9FB1-41A9-A11B-D89F90E595A0</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>action</key>
				<integer>0</integer>
				<key>argument</key>
				<integer>0</integer>
				<key>focusedappvariable</key>
				<false/>
				<key>focusedappvariablename</key>
				<string></string>
				<key>hotkey</key>
				<integer>47</integer>
				<key>hotmod</key>
				<integer>1048576</integer>
				<key>hotstring</key>
				<string>.</string>
				<key>leftcursor</key>
				<false/>
				<key>modsmode</key>
				<integer>2</integer>
				<key>relatedAppsMode</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.hotkey</string>
			<key>uid</key>
			<string>BD4EF4CC-DB4B-4397-937E-44BDB9ACEF09</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<true/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>use framework "Foundation"
use framework "AppKit"

on run {query}
    # è·å– NSPasteboard
    set pasteBoard to current application's NSPasteboard's generalPasteboard()
    
    # ä¿å­˜åŸå§‹å‰ªè´´æ¿å†…å®¹
    set oldContent to pasteBoard's stringForType:(current application's NSPasteboardTypeString)
    
    # æ¸…ç©ºå‰ªè´´æ¿å¹¶è®¾ç½®æ–°å†…å®¹
    pasteBoard's clearContents()
    pasteBoard's setString:query forType:(current application's NSPasteboardTypeString)
    
    tell application "System Events"
        key code 0 using {command down}  # Command + A
        key code 123  # å·¦ç®­å¤´
        delay 0.02  # å°å»¶è¿Ÿç¡®ä¿å…‰æ ‡å·²ç§»åŠ¨
        keystroke "v" using command down
    end tell
    
    # å»¶è¿Ÿä»¥ç¡®ä¿ç²˜è´´å®Œæˆ
    delay 0.04
    
    # è¿˜åŸåŸå§‹å‰ªè´´æ¿å†…å®¹
    pasteBoard's clearContents()
    if oldContent is not missing value then
        pasteBoard's setString:oldContent forType:(current application's NSPasteboardTypeString)
    end if
end run</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>6</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>4D90AA80-A25C-4B65-A0E4-5103FFF20ED5</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
	</array>
	<key>readme</key>
	<string>å¿«é€Ÿè°ƒç”¨å¸¸ç”¨çš„æç¤ºè¯­ (prompt)ï¼Œé€šè¿‡å…¨å±€å¿«æ·é”® (Command + "/") ä¸€é”®è¾“å…¥é¢„è®¾å¥½çš„æ–‡æœ¬æ¨¡æ¿ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚é€‚ç”¨äºç¿»è¯‘ã€æ–‡æœ¬æ¶¦è‰²ã€ä»£ç è§£é‡Šç­‰å¤šç§åœºæ™¯ï¼Œæ”¯æŒ Mac ç³»ç»Ÿå…¨å±€è°ƒç”¨ã€‚

Instantly access and insert predefined prompts with a single hotkey (Command + "/"), streamlining your workflow. This global Mac utility enhances efficiency for various tasks including translation, text polishing, and code interpretation.</string>
	<key>uidata</key>
	<dict>
		<key>4D90AA80-A25C-4B65-A0E4-5103FFF20ED5</key>
		<dict>
			<key>xpos</key>
			<real>620</real>
			<key>ypos</key>
			<real>300</real>
		</dict>
		<key>BD4EF4CC-DB4B-4397-937E-44BDB9ACEF09</key>
		<dict>
			<key>xpos</key>
			<real>300</real>
			<key>ypos</key>
			<real>300</real>
		</dict>
		<key>E5D2D2A9-9FB1-41A9-A11B-D89F90E595A0</key>
		<dict>
			<key>xpos</key>
			<real>460</real>
			<key>ypos</key>
			<real>300</real>
		</dict>
	</dict>
	<key>userconfigurationconfig</key>
	<array/>
	<key>variablesdontexport</key>
	<array/>
	<key>version</key>
	<string>1.0.6</string>
	<key>webaddress</key>
	<string></string>
</dict>
</plist>
